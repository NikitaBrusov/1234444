# Асинхронное взаимодействие



## Kafka

Кафка. Для чего нужны massages broker? Что такое топик? Что такое партиция?

\


Кластер Кафка состоит из брокеров.

Брокер - это посредник передачи сообщений между сервисами.

Сущесвует две сущности: продюсер - издатель сообщений и консюмер - подписчик

\* Сообщения отправляются напрямую от П к К

\* Схема публицкации/подписок

П не знает К, поэтому публикует сообщение в топик. Консюмеры которые подписаны на этот топик забирают сообщение.

\


Для чего нужно?

\*Отказоустойчивость. Даже если получатель недоуступен, то продюсер всё равно сможет опубликовать сообщение (но в топик)

\*За счёт асинхронной работы можно увеличивать производительность

\


Когда использовать брокер?

\*Действия, которые требуют много времени, но не требуют мнгновенного результата

\*Микросервисы: каждый сервис подписывется только на свой топик и получает сообщения из него

\*Моб приложения.Смартфон подписан на топик - когда там появляется сообщение - смартфон выводит пуш

\


Что такое топик?

Топик - это логическое разделение категорий сообщений на группы. Для того чтобы читать актуальные сообщения в каждом топике есть специальный указатель - порядковый номер (offset), который отвечает за смещение курсора на следующее сообщение в очереди.

Что такое партиция?

Бывают такие случаи, когда сообщение в топики приходят быстрее, чем уходят из него. Специально для этого в Kafka-топиках предусмотрены разделы (partition), которые разделяют очереди с целью защиты топика от переполнения.

\


ИТОГО

Кластер - брокер - топики - партиции - сегменты

Обратите внимание, что в Kafka топик — это логическое объединение, а партиция — фактическая единица хранения.
